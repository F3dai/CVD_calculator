<html lang="en">
{% include 'header.html' %}

<body>
    {% include 'nav.html' %}
    <div class="container">
        <br />
        <h1>Patient Statistics</h1>

        <div class="d-flex justify-content-between flex-wrap">

            <div class="p-2" style="flex: 1 0 40%; margin: 30px;">
                <h3>Number of patients and recorded CVD risk.</h3>
                <canvas id="cvd_risk"></canvas>
            </div>

            <div class="p-2" style="flex: 1 0 40%; margin: 30px;">
                <h3>Sex as a proportion</h3>
                <canvas id="gender" style="max-height:300px;"></canvas>
            </div>

            <div class="p-2" style="flex: 1 0 40%; margin: 30px;">
                <h3>Age and CVD risk</h3>
                <canvas id="scatter"></canvas>
            </div>

            <div class="p-2" style="flex: 1 0 40%; margin: 30px;">
                <h3>Average CVD risk over time</h3>
                <canvas id="risk_ot"></canvas>
            </div>

            <div class="p-2" style="flex: 1 0 40%; margin: 30px;">
                <h3>Proportion of smokers (male)</h3>
                <canvas id="smoker_male" style="max-height:300px;"></canvas>
            </div>

            <div class="p-2" style="flex: 1 0 40%; margin: 30px;">
                <h3>Proportion of smokers (female)</h3>
                <canvas id="smoker_female" style="max-height:300px;"></canvas>
            </div>
        </div>


        <script>
            const cvd_risk = new Chart(document.getElementById('cvd_risk'), {
                type: 'bar',
                data: {
                    labels: ['<10%', '10% - 20%', '<20%'],
                    datasets: [{
                        label: 'CVD Risk',
                        data: [12, 19, 3],
                        backgroundColor: [
                            'green',
                            'orange',
                            'red',
                        ],
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: "# of patients"
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: "% CVD risk"
                            }
                        }
                    }
                }
            });

            const sex = new Chart(document.getElementById('gender'), {
                type: 'doughnut',
                data: {
                    labels: ['male', 'female'],
                    datasets: [{
                        label: 'Sex',
                        data: [12, 19],
                        backgroundColor: [
                            'blue',
                            'red',
                        ],
                        hoverOffset: 4
                    }]
                },
                options: {
                    scales: {
                        x: {display: false},
                        y: {display: false}
                    }
                }
            });

            const scatter = new Chart(document.getElementById('scatter'), {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'Age & CVD Risk ',
                        data: [
                            { x: 20, y: 5 },
                            { x: 30, y: 5 },
                            { x: 35, y: 6 },
                            { x: 33, y: 9 },
                            { x: 44, y: 4 },
                            { x: 74, y: 10 },
                            { x: 37, y: 7 },

                        ],
                        backgroundColor: 'red',
                    }]
                },
                options: {
                    scales: {
                        y: {
                            title: {
                                display: true,
                                text: "% CVD risk"
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: "Age"
                            }
                        }
                    }
                }

            });

            const risk_ot = new Chart(document.getElementById('risk_ot'), {
                type: 'line',
                data: {
                    labels: [0, 10, 20, 30, 40, 50, 60, 70, 80],
                    datasets: [{
                        label: 'CVD Risk over time',
                        data: [0, 1, 3, 4, 6, 6, 7, 7, 8, 8],
                        borderColor: [
                            'blue',
                        ],
                        fill: false,
                        tension: 0.1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            title: {
                                display: true,
                                text: "% CVD risk"
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: "Age"
                            }
                        }
                    }
                }

            });

            const smoker_male = new Chart(document.getElementById('smoker_male'), {
                type: 'doughnut',
                data: {
                    labels: ['smoker', 'non-smoker'],
                    datasets: [{
                        label: 'Smoker',
                        data: [23, 60],
                        backgroundColor: [
                            'red',
                            'blue',
                        ],
                        hoverOffset: 4
                    }]
                },
                options: {
                    scales: {
                        x: {display: false},
                        y: {display: false}
                    }
                }
            });

            const smoker_female = new Chart(document.getElementById('smoker_female'), {
                type: 'doughnut',
                data: {
                    labels: ['smoker', 'non-smoker'],
                    datasets: [{
                        label: 'Smoker',
                        data: [15, 60],
                        backgroundColor: [
                            'red',
                            'blue',
                        ],
                        hoverOffset: 4
                    }]
                },
                options: {
                    scales: {
                        x: {display: false},
                        y: {display: false}
                    }
                }
            });


        </script>
    </div>
</body>

</html>